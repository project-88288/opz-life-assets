"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LCDClientExtra = void 0;
const terra_js_1 = require("@terra-money/terra.js");
class LCDClientExtra extends terra_js_1.LCDClient {
    constructor(config, refs) {
        super(config);
        this.refs = refs;
    }
    query(contract, msg, instanceId = 'default') {
        return this.wasm.contractQuery(this.refs[contract].contractAddresses[instanceId], msg);
    }
    async execute(contract, wallet, msg, coins, options, instanceId = 'default') {
        const msgs = [
            new terra_js_1.MsgExecuteContract(wallet.key.accAddress, 
            // Enable supplying a contract address instead of the contract name.
            contract.startsWith('terra1') ? contract : this.refs[contract].contractAddresses[instanceId], msg, coins),
        ];
        const mergedOptions = options ? Object.assign(Object.assign({}, options), { msgs }) : { msgs };
        const tx = await wallet.createAndSignTx(mergedOptions);
        return this.tx.broadcast(tx);
    }
}
exports.LCDClientExtra = LCDClientExtra;
